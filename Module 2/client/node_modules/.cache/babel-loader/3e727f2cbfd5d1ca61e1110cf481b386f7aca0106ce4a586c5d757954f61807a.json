{"ast":null,"code":"var _jsxFileName = \"D:\\\\BRAC university\\\\CSE\\\\CSE471\\\\Module 2\\\\client\\\\src\\\\components\\\\LocationsMap.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix Leaflet icon issue\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png'\n});\n\n// Create a highlighted marker icon\nconst highlightedIcon = L.icon({\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41],\n  className: 'highlighted-marker' // We'll style this with CSS\n});\nconst LocationsMap = ({\n  items,\n  selectedLocation\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef({});\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Default position (Dhaka, Bangladesh)\n    const defaultPosition = [23.8103, 90.4125];\n\n    // Calculate center based on items\n    let center = defaultPosition;\n    let zoom = 10;\n    if (items && items.length > 0 && items[0].location) {\n      if (items.length === 1) {\n        center = [items[0].location.lat, items[0].location.lng];\n        zoom = 13;\n      } else {\n        // Calculate average of all locations\n        const sumLat = items.reduce((sum, item) => sum + (item.location ? item.location.lat : 0), 0);\n        const sumLng = items.reduce((sum, item) => sum + (item.location ? item.location.lng : 0), 0);\n        center = [sumLat / items.length, sumLng / items.length];\n      }\n    }\n\n    // Create map instance\n    const map = L.map(mapRef.current).setView(center, zoom);\n    mapInstanceRef.current = map;\n\n    // Add tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n\n    // Add markers for each item\n    if (items && items.length > 0) {\n      items.forEach(item => {\n        if (item.location && item.location.lat && item.location.lng) {\n          const marker = L.marker([item.location.lat, item.location.lng]).addTo(map);\n\n          // Store marker reference with item ID\n          markersRef.current[item._id] = marker;\n\n          // Add popup with item details\n          marker.bindPopup(`\n            <div>\n              <h3>${item.name}</h3>\n              <p>${item.description}</p>\n              <p>Added on: ${new Date(item.date).toLocaleDateString()}</p>\n              <p><strong>Coordinates:</strong> ${item.location.lat.toFixed(6)}, ${item.location.lng.toFixed(6)}</p>\n            </div>\n          `);\n        }\n      });\n    }\n\n    // Cleanup\n    return () => {\n      map.remove();\n      mapInstanceRef.current = null;\n      markersRef.current = {};\n    };\n  }, [items]);\n\n  // Handle selected location change\n  useEffect(() => {\n    const map = mapInstanceRef.current;\n    if (!map || !selectedLocation || !selectedLocation._id) return;\n\n    // Reset all markers to default icon\n    Object.values(markersRef.current).forEach(marker => {\n      marker.setIcon(new L.Icon.Default());\n    });\n\n    // Highlight the selected marker\n    const marker = markersRef.current[selectedLocation._id];\n    if (marker) {\n      marker.setIcon(highlightedIcon);\n      marker.openPopup();\n\n      // Center map on selected location\n      if (selectedLocation.location) {\n        map.setView([selectedLocation.location.lat, selectedLocation.location.lng], 15);\n      }\n    }\n  }, [selectedLocation]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      width: '100%',\n      height: '500px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 10\n  }, this);\n};\n_s(LocationsMap, \"HfxYcnpQhQPTJOnowaWcPQZAg+0=\");\n_c = LocationsMap;\nexport default LocationsMap;\nvar _c;\n$RefreshReg$(_c, \"LocationsMap\");","map":{"version":3,"names":["React","useEffect","useRef","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","highlightedIcon","icon","iconSize","iconAnchor","popupAnchor","shadowSize","className","LocationsMap","items","selectedLocation","_s","mapRef","mapInstanceRef","markersRef","current","defaultPosition","center","zoom","length","location","lat","lng","sumLat","reduce","sum","item","sumLng","map","setView","tileLayer","attribution","addTo","forEach","marker","_id","bindPopup","name","description","Date","date","toLocaleDateString","toFixed","remove","Object","values","setIcon","openPopup","ref","style","width","height","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/BRAC university/CSE/CSE471/Module 2/client/src/components/LocationsMap.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix Leaflet icon issue\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',\n});\n\n// Create a highlighted marker icon\nconst highlightedIcon = L.icon({\n  iconUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png',\n  iconRetinaUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png',\n  shadowUrl: 'https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png',\n  iconSize: [25, 41],\n  iconAnchor: [12, 41],\n  popupAnchor: [1, -34],\n  shadowSize: [41, 41],\n  className: 'highlighted-marker' // We'll style this with CSS\n});\n\nconst LocationsMap = ({ items, selectedLocation }) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef({});\n\n  // Initialize map\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    // Default position (Dhaka, Bangladesh)\n    const defaultPosition = [23.8103, 90.4125];\n\n    // Calculate center based on items\n    let center = defaultPosition;\n    let zoom = 10;\n\n    if (items && items.length > 0 && items[0].location) {\n      if (items.length === 1) {\n        center = [items[0].location.lat, items[0].location.lng];\n        zoom = 13;\n      } else {\n        // Calculate average of all locations\n        const sumLat = items.reduce((sum, item) => sum + (item.location ? item.location.lat : 0), 0);\n        const sumLng = items.reduce((sum, item) => sum + (item.location ? item.location.lng : 0), 0);\n        center = [sumLat / items.length, sumLng / items.length];\n      }\n    }\n\n    // Create map instance\n    const map = L.map(mapRef.current).setView(center, zoom);\n    mapInstanceRef.current = map;\n\n    // Add tile layer\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n    }).addTo(map);\n\n    // Add markers for each item\n    if (items && items.length > 0) {\n      items.forEach(item => {\n        if (item.location && item.location.lat && item.location.lng) {\n          const marker = L.marker([item.location.lat, item.location.lng]).addTo(map);\n\n          // Store marker reference with item ID\n          markersRef.current[item._id] = marker;\n\n          // Add popup with item details\n          marker.bindPopup(`\n            <div>\n              <h3>${item.name}</h3>\n              <p>${item.description}</p>\n              <p>Added on: ${new Date(item.date).toLocaleDateString()}</p>\n              <p><strong>Coordinates:</strong> ${item.location.lat.toFixed(6)}, ${item.location.lng.toFixed(6)}</p>\n            </div>\n          `);\n        }\n      });\n    }\n\n    // Cleanup\n    return () => {\n      map.remove();\n      mapInstanceRef.current = null;\n      markersRef.current = {};\n    };\n  }, [items]);\n\n  // Handle selected location change\n  useEffect(() => {\n    const map = mapInstanceRef.current;\n    if (!map || !selectedLocation || !selectedLocation._id) return;\n\n    // Reset all markers to default icon\n    Object.values(markersRef.current).forEach(marker => {\n      marker.setIcon(new L.Icon.Default());\n    });\n\n    // Highlight the selected marker\n    const marker = markersRef.current[selectedLocation._id];\n    if (marker) {\n      marker.setIcon(highlightedIcon);\n      marker.openPopup();\n\n      // Center map on selected location\n      if (selectedLocation.location) {\n        map.setView([selectedLocation.location.lat, selectedLocation.location.lng], 15);\n      }\n    }\n  }, [selectedLocation]);\n\n  return <div ref={mapRef} style={{ width: '100%', height: '500px' }}></div>;\n};\n\nexport default LocationsMap;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}